<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Biodata & Pencarian Mahasiswa - Fakultas Teknik</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <!-- jsPDF & autoTable -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
</head>
<body class="bg-gray-100">

<div class="container mx-auto p-4">
    <h1 class="text-2xl font-bold mb-4">Daftar Mahasiswa Fakultas Teknik</h1>

    <!-- Tombol navigasi & aksi -->
    <div class="flex justify-between mb-4">
        <div class="flex items-center space-x-3">
            <button onclick="downloadTemplate()"
               class="bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-4 rounded-md shadow-md transition duration-150 cursor-pointer text-sm">
               <i class="fas fa-download mr-2"></i> Download Template
            </button>
            
            <input type="file" id="excelFileInput" accept=".xlsx, .xls" class="hidden" onchange="importFromExcel(event)">
            <label for="excelFileInput" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-md shadow-md transition duration-150 cursor-pointer text-sm">
                <i class="fas fa-file-excel mr-2"></i> Import File
            </label>
            <span id="importStatus" class="text-sm text-gray-600"></span>
        </div>

        <div class="flex space-x-2 items-center">
            <button onclick="exportToExcel()" class="bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-2 px-4 rounded-md shadow-md transition duration-150">
                <i class="fas fa-file-excel mr-2"></i> Export Excel
            </button>
            <button onclick="exportToPDF()" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-md shadow-md transition duration-150">
                <i class="fas fa-file-pdf mr-2"></i> Export PDF
            </button>
            <button onclick="showForm()" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-md shadow-md transition duration-150">
                <i class="fas fa-plus-circle mr-2"></i> Tambah Data Mahasiswa
            </button>

            <!-- NAVIGASI BUTTON TAMBAHAN -->
            <div class="relative">
                <button id="navButton" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md shadow-md transition duration-150 flex items-center space-x-1">
                    <i class="fas fa-bars"></i><span>Menu</span>
                </button>
                <div id="navDropdown" class="absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-md shadow-lg hidden z-50">
                    <button onclick="filterLulusan()" class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                        <i class="fas fa-graduation-cap mr-2"></i> Lulusan Mahasiswa
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Filter Pencarian -->
    <div class="flex space-x-3 mb-4">
        <input type="text" id="searchNama" placeholder="Cari Nama" class="border rounded-md px-3 py-2 w-1/3">
        <input type="text" id="searchNpm" placeholder="Cari NPM" class="border rounded-md px-3 py-2 w-1/3">
        <select id="searchTahunSelect" class="border rounded-md px-3 py-2 w-1/3">
            <option value="">Pilih Tahun Masuk</option>
            <option value="2020">2020</option>
            <option value="2021">2021</option>
            <option value="2022">2022</option>
        </select>
    </div>

    <!-- Tabel Mahasiswa -->
    <div class="overflow-x-auto bg-white rounded-md shadow-md">
        <table class="min-w-full divide-y divide-gray-200" id="mahasiswaTable">
            <thead class="bg-gray-50">
                <tr>
                    <th class="px-4 py-2 text-left text-sm font-medium text-gray-500 uppercase">No</th>
                    <th class="px-4 py-2 text-left text-sm font-medium text-gray-500 uppercase">NPM</th>
                    <th class="px-4 py-2 text-left text-sm font-medium text-gray-500 uppercase">Nama</th>
                    <th class="px-4 py-2 text-left text-sm font-medium text-gray-500 uppercase">Jurusan</th>
                    <th class="px-4 py-2 text-left text-sm font-medium text-gray-500 uppercase">Tahun Masuk</th>
                    <th class="px-4 py-2 text-left text-sm font-medium text-gray-500 uppercase">Status</th>
                </tr>
            </thead>
            <tbody id="mahasiswaBody" class="divide-y divide-gray-200">
                <!-- Data akan dimuat di sini -->
            </tbody>
        </table>
    </div>
</div>

<script>
    // Toggle dropdown navigasi
    const navButton = document.getElementById('navButton');
    const navDropdown = document.getElementById('navDropdown');

    navButton.addEventListener('click', () => {
        navDropdown.classList.toggle('hidden');
    });

    // Dummy data mahasiswa (contoh)
    let mahasiswaData = [
        { npm: '12345', nama: 'Alfiansyah', jurusan: 'Teknik Informatika', tahun: '2021', status: 'Aktif' },
        { npm: '12346', nama: 'Budi', jurusan: 'Teknik Sipil', tahun: '2020', status: 'Lulus' },
        { npm: '12347', nama: 'Citra', jurusan: 'Teknik Elektro', tahun: '2022', status: 'Aktif' },
    ];

    // Fungsi menampilkan data ke tabel
    function loadMahasiswaData(filter={}) {
        const tbody = document.getElementById('mahasiswaBody');
        tbody.innerHTML = '';
        let data = mahasiswaData;

        if(filter.status) {
            data = data.filter(m => m.status === filter.status);
        }

        data.forEach((mhs, idx) => {
            const tr = document.createElement('tr');
            tr.innerHTML = `
                <td class="px-4 py-2">${idx + 1}</td>
                <td class="px-4 py-2">${mhs.npm}</td>
                <td class="px-4 py-2">${mhs.nama}</td>
                <td class="px-4 py-2">${mhs.jurusan}</td>
                <td class="px-4 py-2">${mhs.tahun}</td>
                <td class="px-4 py-2">${mhs.status}</td>
            `;
            tbody.appendChild(tr);
        });
    }

    loadMahasiswaData();

    // Fungsi filter Lulusan Mahasiswa
    function filterLulusan() {
        navDropdown.classList.add('hidden');
        document.getElementById('searchNama').value = '';
        document.getElementById('searchNpm').value = '';
        document.getElementById('searchTahunSelect').value = '';
        loadMahasiswaData({ status: 'Lulus' });
    }

    // Fungsi export/import/template (dummy)
    function exportToExcel() { alert('Export Excel dijalankan!'); }
    function exportToPDF() { alert('Export PDF dijalankan!'); }
    function showForm() { alert('Form tambah data dibuka!'); }
    function downloadTemplate() { alert('Download template dijalankan!'); }
    function importFromExcel(event) { alert('Import file dijalankan!'); }
</script>

</body>
</html>
