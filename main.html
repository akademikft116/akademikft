<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jadwal Kuliah</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
  
  <link href="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/css/tom-select.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/js/tom-select.complete.min.js"></script>
  
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf.plugin.autotable.min.js"></script>
  
  <link rel="stylesheet" href="style.css">

</head>

<body class="bg-gray-100">
  
  <nav class="bg-blue-800 p-4 shadow-lg sticky top-0 z-10">
      <div class="container mx-auto flex justify-between items-center max-w-7xl">
          <h1 class="text-white text-2xl font-bold">Manajemen Jadwal Kuliah</h1>
          <div class="flex space-x-3">
              <a href="dashboard.html" class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded transition duration-200 flex items-center shadow-md">
                  <i class="fa-solid fa-arrow-left mr-2"></i>Dashboard
              </a>
              <button onclick="logout()" class="bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded transition duration-200 flex items-center shadow-md">
                  <i class="fa-solid fa-sign-out-alt mr-2"></i>Logout
              </button>
          </div>
      </div>
  </nav>

  <div class="container mx-auto mt-8 p-6 bg-white shadow-xl rounded-lg max-w-7xl">
    
    <h2 class="text-3xl font-extrabold mb-6 text-gray-800 text-center border-b pb-3">Sistem Informasi Jadwal Kuliah FT</h2>
    
    <div id="jadwal-form" class="mb-8 border p-6 rounded-lg bg-blue-50">
        <h3 id="form-header" class="text-xl font-bold mb-4 text-blue-800">Tambah Jadwal Baru</h3>
        
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
            <div><label class="block text-sm font-medium text-gray-700">Prodi:</label><select id="prodi" class="mt-1 block w-full border-gray-300 rounded-md p-2"></select></div>
            <div><label class="block text-sm font-medium text-gray-700">Semester:</label><select id="semester" class="mt-1 block w-full border-gray-300 rounded-md p-2"></select></div>
            <div><label class="block text-sm font-medium text-gray-700">Kelas:</label><select id="kelas" class="mt-1 block w-full border-gray-300 rounded-md p-2"></select></div>
            <div><label class="block text-sm font-medium text-gray-700">Tahun Akademik:</label><select id="tahun_akademik" class="mt-1 block w-full border-gray-300 rounded-md p-2"></select></div>
            
            <div><label class="block text-sm font-medium text-gray-700">Mata Kuliah:</label><select id="mata_kuliah" class="mt-1 block w-full border-gray-300 rounded-md p-2"></select></div>
            <div><label class="block text-sm font-medium text-gray-700">Dosen Pengampu:</label><select id="dosen" class="mt-1 block w-full border-gray-300 rounded-md p-2"></select></div>
            <div><label class="block text-sm font-medium text-gray-700">Asisten Dosen (Opsional):</label><select id="asisten" class="mt-1 block w-full border-gray-300 rounded-md p-2"></select></div>
            <div><label class="block text-sm font-medium text-gray-700">Jenis:</label><select id="jenis" class="mt-1 block w-full border-gray-300 rounded-md p-2"><option>Teori</option><option>Praktikum</option></select></div>
            
            <div><label class="block text-sm font-medium text-gray-700">Hari:</label><select id="hari" class="mt-1 block w-full border-gray-300 rounded-md p-2"></select></div>
            <div><label class="block text-sm font-medium text-gray-700">Jam Mulai:</label><input type="time" id="jam_mulai" class="mt-1 block w-full border-gray-300 rounded-md p-2"></div>
            <div><label class="block text-sm font-medium text-gray-700">Jam Selesai:</label><input type="time" id="jam_selesai" class="mt-1 block w-full border-gray-300 rounded-md p-2"></div>
            <div><label class="block text-sm font-medium text-gray-700">Ruangan:</label><select id="ruangan" class="mt-1 block w-full border-gray-300 rounded-md p-2"></select></div>
        </div>
        
        <div class="mt-6 flex justify-end space-x-3">
            <input type="hidden" id="jadwal-id">
            <button id="cancel-btn" onclick="resetForm()" class="py-2 px-4 rounded-md shadow-sm text-sm font-medium text-white bg-gray-500 hover:bg-gray-600 transition duration-150" style="display: none;">Batal</button>
            <button id="submit-btn" onclick="submitForm()" class="py-2 px-4 rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 transition duration-150">Tambah Jadwal</button>
        </div>
    </div>

    <div class="flex flex-wrap justify-between items-center mb-6 p-4 border rounded-lg bg-gray-50">
        <h3 class="text-lg font-bold text-gray-700">Filter Data:</h3>
        <div class="flex flex-wrap gap-3 mt-2 md:mt-0">
            <select id="filterProdi" onchange="loadData()" class="border-gray-300 rounded-md text-sm p-2"></select>
            <select id="filterSemester" onchange="loadData()" class="border-gray-300 rounded-md text-sm p-2"></select>
            <select id="filterKelas" onchange="loadData()" class="border-gray-300 rounded-md text-sm p-2"></select>
            <select id="filterMataKuliah" onchange="loadData()" class="border-gray-300 rounded-md text-sm p-2"></select>
            <select id="filterDosen" onchange="loadData()" class="border-gray-300 rounded-md text-sm p-2"></select>
            <select id="filterTahun" onchange="loadData()" class="border-gray-300 rounded-md text-sm p-2"></select>
        </div>
        
        <div class="flex space-x-3 mt-4 w-full md:w-auto md:mt-0 justify-end">
            <button onclick="exportExcel()" class="export-btn py-2 px-4 rounded-md shadow-sm text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 transition duration-150 flex items-center">
                <i class="fa-solid fa-file-excel mr-2"></i>Export Excel
            </button>
            <button onclick="exportPDF()" class="export-btn py-2 px-4 rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 transition duration-150 flex items-center">
                <i class="fa-solid fa-file-pdf mr-2"></i>Export PDF
            </button>
        </div>
    </div>
    
    <div class="overflow-x-auto shadow-md rounded-lg">
      <table id="tabelJadwal" class="min-w-full divide-y divide-gray-200">
        <thead class="bg-blue-100 sticky top-0">
          <tr>
            <th class="px-6 py-3 text-xs font-bold text-gray-700 uppercase tracking-wider">No</th>
            <th class="px-6 py-3 text-xs font-bold text-gray-700 uppercase tracking-wider">Prodi</th>
            <th class="px-6 py-3 text-xs font-bold text-gray-700 uppercase tracking-wider">Semester</th>
            <th class="px-6 py-3 text-xs font-bold text-gray-700 uppercase tracking-wider">Kelas</th>
            <th class="px-6 py-3 text-xs font-bold text-gray-700 uppercase tracking-wider">Hari</th>
            <th class="px-6 py-3 text-xs font-bold text-gray-700 uppercase tracking-wider">Jam</th>
            <th class="px-6 py-3 text-xs font-bold text-gray-700 uppercase tracking-wider">Jenis</th>
            <th class="px-6 py-3 text-xs font-bold text-gray-700 uppercase tracking-wider">Mata Kuliah</th>
            <th class="px-6 py-3 text-xs font-bold text-gray-700 uppercase tracking-wider">Dosen</th>
            <th class="px-6 py-3 text-xs font-bold text-gray-700 uppercase tracking-wider">Asisten</th>
            <th class="px-6 py-3 text-xs font-bold text-gray-700 uppercase tracking-wider">Ruangan</th>
            <th class="px-6 py-3 text-xs font-bold text-gray-700 uppercase tracking-wider">Tahun</th>
            <th class="px-6 py-3 text-xs font-bold text-gray-700 uppercase tracking-wider">Aksi</th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
          </tbody>
      </table>
    </div>

  </div>
  
  <script src="jadwal.js"></script>
</body>
</html>
